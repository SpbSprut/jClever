(function(a){a.fn.jClever=function(g){g=a.extend({applyTo:{select:!0,checkbox:!0,radio:!0,button:!0,file:!0,input:!0,textarea:!0},validate:{state:!1,items:{}},errorTemplate:'<span class="jClever-error-label"></span>',errorClassTemplate:"jClever-error-label",selfClass:"default",fileUploadText:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"},g);var p={},k=[],l={},q={isNumeric:function(a){return/^\d+$/.test(a)},isString:function(a){return/^[a-zA-Z\u0410-\u042f\u0430-\u044f]+$/.test(a)},isAnyText:function(a){return/^[a-zA-Z\u0410-\u042f\u0430-\u044f0-9]+$/.test(a)},
isEmail:function(a){return/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,4}$/.test(a)},isSiteURL:function(a){return/^((https?|ftp)\:\/\/)?([a-z0-9]{1,})([a-z0-9-.]*)\.([a-z]{2,4})$/.test(a)}},n=999,j=1,f={init:function(b){!0===g.validate.state&&a(b).submit(function(){var d=a(b).get(0),e={};a(d).find(".error").removeClass("error");for(var c in g.validate.items)if(void 0!==d[c])for(var f in g.validate.items[c])switch(f){case "required":if(""==d[c].value||d[c].value==a(d[c]).data("placeholder"))e[c]=
g.validate.items[c][f];break;case "numeric":!0!=q.isNumeric(d[c].value)&&(e[c]=g.validate.items[c][f]);break;case "str":!0!=q.isString(d[c].value)&&(e[c]=g.validate.items[c][f]);break;case "stringAndNumeric":!0!=q.isAnyText(d[c].value)&&(e[c]=g.validate.items[c][f]);break;case "mail":!0!=q.isEmail(d[c].value)&&(e[c]=g.validate.items[c][f]);break;case "siteURL":!0!=q.isSiteURL(d[c].value)&&(e[c]=g.validate.items[c][f])}c=0;for(var h in e)if(void 0!=d[h]){f=e[h];var k=a(d[h]).parents(".jClever-element"),
j=k.find("."+g.errorClassTemplate);k.addClass("error");j.text(f);c++}return c?!1:!0});a(b).find("input[type=text], input[type=password], textarea").each(function(){var b=a(this),e=a(this).data("placeholder");"string"===typeof e&&(""==b.val()&&b.val(e).addClass("placeholdered"),b.focusin(function(){b.val()==e&&b.val("").removeClass("placeholdered")}),b.focusout(function(){""==b.val()&&b.val(e).addClass("placeholdered")}))});var d=a(b).get(0).elements;for(key=0;key<d.length;key++)switch(d[key].nodeName){case "SELECT":if(g.applyTo.select){var c=
a(d[key]);"undefined"==typeof c.attr("multiple")?f.selectActivate(d[key],n,j):f.multiSelectActivate(d[key],n,j);l[c.attr("name")]={type:"select",value:c.attr("value")};n--;j++}break;case "TEXTAREA":g.applyTo.textarea&&(c=a(d[key]),f.textareaActivate(d[key],j),j++);break;case "INPUT":c=a(d[key]);g.applyTo.checkbox&&"checkbox"==c.attr("type")&&(l[c.attr("name")]={type:"checkbox",value:c.is(":checked")?1:0},f.checkboxActivate(d[key],j),j++);g.applyTo.radio&&"radio"==c.attr("type")&&(l[c.attr("name")]=
{type:"radio",value:c.is(":checked")?1:0},f.radioActivate(d[key],j),j++);g.applyTo.file&&"file"==c.attr("type")&&(l[c.attr("name")]={type:"file",value:""},f.fileActivate(d[key],j),j++);if(g.applyTo.button&&("submit"==c.attr("type")||"reset"==c.attr("type")||"button"==c.attr("type")))f.submitActivate(d[key],j),j++;if(g.applyTo.input&&("text"==c.attr("type")||"password"==c.attr("type")))f.inputActivate(d[key],j),j++}a(b).find("button[type=reset]").click(function(){f.reset(a(b))})},destroy:function(b){b.find("select").each(function(){var b=
a(this).clone();a(this).parents(".jClever-element").empty().after(b)});b.find("input[type=checkbox]").each(function(){var b=a(this).removeClass("hidden").clone();a(this).parents(".jClever-element").empty().after(b)});b.find("input[type=radio]").each(function(){var b=a(this).removeClass("hidden").clone();a(this).parents(".jClever-element").empty().after(b)});b.find(".jClever-element").remove();b.removeClass("clevered")},reset:function(b){b.find("input[type=radio], input[type=checkbox], select, input[type=file]").each(function(){if(l[a(this).attr("name")])switch(l[a(this).attr("name")].type){case "select":f.selectSetPosition(a(this),
l[a(this).attr("name")].value);break;case "checkbox":f.checkboxSetState(a(this),l[a(this).attr("name")].value);break;case "radio":f.radioSetState(a(this),l[a(this).attr("name")].value);break;case "file":f.fileSetState(a(this),l[a(this).attr("name")].value)}})},selectSetPosition:function(a,d){a.find("option").removeAttr("selected");a.find('option[value="'+d+'"]').attr("selected","selected");a.trigger("change")},selectAdd:function(b){a(element).find(b).each(function(){l[a(this).attr("name")]={type:"select",
value:a(this).attr("value")};f.selectActivate(this,n,j);n--;j++})},checkboxSetState:function(a,d){1==d?a.attr("checked","checked"):a.removeAttr("checked");a.trigger("change")},radioSetState:function(a,d){1==d?a.attr("checked","checked"):a.removeAttr("checked");a.trigger("change")},fileSetState:function(a,d){a.parents(".jClever-element-file").find(".jClever-element-file-name").text(d)},selectCollectionExtend:function(b,d){b[d.attr("name")]={object:d,updateFromHTML:function(b){a("select[name="+this.object[0].name+
"]").html(b).trigger("update");return!1},updateFromJsonObject:function(b){var d="",e;for(e in b)d+='<option value="'+e+'">'+b[e]+"</option>";a("select[name="+this.object[0].name+"]").html(d).trigger("update");return!1}};return b},multiSelectActivate:function(b,d,c){k[a(b).attr("name")]={};p=f.selectCollectionExtend(p,a(b));var j=a(b).width();a(b).wrap('<div class="jClever-element" style="z-index:'+d+';"><div class="jClever-element-select-wrapper multiselect" style="width:'+j+"px; z-index:"+d+';"><div class="jClever-element-select-wrapper-design"><div class="jClever-element-select-wrapper-design">').after('<span class="jClever-element-select-center">&nbsp;</span><span class="jClever-element-select-right"><span>v</span></span><div class="jClever-element-select-list-wrapper" style="z-index:'+
d+';"><ul class="jClever-element-select-list"></ul></div>');var e=a(b).parents(".jClever-element").attr("tabindex",c),r=e.find(".jClever-element-select-center");e.find(".jClever-element-select-right");e.find(".jClever-element-select-list");var m=e.find(".jClever-element-select-list-wrapper");d=a("label[for="+a(b).attr("id")+"]");a(b).attr("disabled")&&e.addClass("disabled");e.append(g.errorTemplate);a(b).find("option").each(function(){a(this).is(":selected")?e.find(".jClever-element-select-list").append(a('<li class="active" data-value="'+
a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>")):e.find(".jClever-element-select-list").append(a('<li data-value="'+a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>"))});if(a(b).find(":selected")){var h="";a(b).find("option:selected").each(function(){h+=a(this).text()+", "});0==h.length?r.html("&nbsp;"):r.text(h.substring(0,h.length-2))}else r.text("&nbsp;");e.on("click.jClever",".jClever-element-select-center, .jClever-element-select-right",function(){if(a(b).attr("disabled"))return!1;
m.is(":visible")?a(".jClever-element-select-list-wrapper").hide():(a(".jClever-element-select-list-wrapper").hide(),m.show(),e.trigger("focus"),k[a(b).attr("name")]=m.jScrollPane().data("jsp"))});m.on("blur.jClever",function(){a(this).hide()});e.on("click.jClever","li",function(){var e=a(this).attr("data-value");a(this).toggleClass("active");a(this).is(".active")?a(b).find('option[value="'+e+'"]').attr("selected","selected"):a(b).find('option[value="'+e+'"]').removeAttr("selected");a(b).trigger("change");
return!1});a(b).on("change.jClever",function(){if(a(this).attr("disabled"))return!1;var e="";a(b).find("option:selected").each(function(){e+=a(this).text()+", "});r.text(e.substring(0,e.length-2))});a(b).on("update.jClever",function(){var e=a(this).parents(".jClever-element-select-wrapper").find(".jClever-element-select-list").empty();a(this).find("option").each(function(){e.append(a('<li data-value="'+a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>"))});a(this).parents(".jClever-element-select-wrapper").find(".jClever-element-select-center").text(a(b).find("option:eq(0)").text())});
e.on("focus.jClever",function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")});d.on("click.jClever",function(){e.trigger("focus");m.show();k[a(b).attr("name")]=m.jScrollPane().data("jsp")});var l="",n=null;e.on("keydown.jClever",function(c){var d=a(b)[0].selectedIndex;switch(c.keyCode){case 40:if(a(b).attr("disabled"))return!1;d<a(b).find("option").length-1&&d++;break;case 38:if(a(b).attr("disabled"))return!1;0<d&&d--;break;case 13:if(m.is(":visible"))m.hide();else{if(a(b).attr("disabled"))return!1;
m.show();k[a(b).attr("name")]=m.jScrollPane().data("jsp")}break;case 32:if(m.is(":visible"))m.hide();else{if(a(b).attr("disabled"))return!1;m.show();k[a(b).attr("name")]=m.jScrollPane().data("jsp")}break;case 9:return m.hide(),!0;default:l+=String.fromCharCode(c.keyCode),clearTimeout(n),n=setTimeout(function(){for(var c=0,f=a(b)[0].options.length,g=0;g<f;g++)if("string"==typeof a(b)[0].options[g].text){var h=a(b)[0].options[g].text.toUpperCase();if(RegExp("^"+l,"i").test(h)){d=c;a(b)[0].selectedIndex=
d;e.find("li.selected").removeClass("selected");e.find("li:eq("+d+")").addClass("selected");e.find("option").removeAttr("selected");e.find("option:eq("+d+")").attr("selected","selected");a(b).trigger("change");m.is(":visible")&&k[a(b).attr("name")].scrollToElement(e.find("li:eq("+d+")"));break}c++}l=""},500)}a(b)[0].selectedIndex=d;e.find("li.selected").removeClass("selected");e.find("li:eq("+d+")").addClass("selected");e.find("option").removeAttr("selected");e.find("option:eq("+d+")").attr("selected",
"selected");a(b).trigger("change");m.is(":visible")&&k[a(b).attr("name")].scrollToElement(e.find("li:eq("+d+")"));return!1})},selectActivate:function(b,d,c){k[a(b).attr("name")]={};p=f.selectCollectionExtend(p,a(b));var j=a(b).width();a(b).wrap('<div class="jClever-element" style="z-index:'+d+';"><div class="jClever-element-select-wrapper" style="width:'+j+"px; z-index:"+d+';"><div class="jClever-element-select-wrapper-design"><div class="jClever-element-select-wrapper-design">').after('<span class="jClever-element-select-center">&nbsp;</span><span class="jClever-element-select-right"><span>v</span></span><div class="jClever-element-select-list-wrapper" style="z-index:'+
d+';"><ul class="jClever-element-select-list"></ul></div>');var e=a(b).parents(".jClever-element").attr("tabindex",c),l=e.find(".jClever-element-select-center");e.find(".jClever-element-select-right");var m=e.find(".jClever-element-select-list"),h=e.find(".jClever-element-select-list-wrapper");d=a("label[for="+a(b).attr("id")+"]");a(b).attr("disabled")&&e.addClass("disabled");e.append(g.errorTemplate);a(b).find("option").each(function(){a(this).is(":selected")?e.find(".jClever-element-select-list").append(a('<li class="active" data-value="'+
a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>")):e.find(".jClever-element-select-list").append(a('<li data-value="'+a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>"))});a(b).find(":selected")?l.text(a(b).find("option:selected").text()):l.text(a(b).find("option:eq(0)").text());e.on("click.jClever",".jClever-element-select-center, .jClever-element-select-right",function(){if(a(b).attr("disabled"))return!1;h.is(":visible")?a(".jClever-element-select-list-wrapper").hide():
(a(".jClever-element-select-list-wrapper").hide(),h.show(),e.trigger("focus"),k[a(b).attr("name")]=h.jScrollPane().data("jsp"))});h.on("blur.jClever",function(){a(this).hide()});e.on("click.jClever","li",function(){var e=a(this).attr("data-value");m.find("li.active").removeClass("active");a(this).addClass("active");a(b).find("option").removeAttr("selected");a(b).find('option[value="'+e+'"]').attr("selected","selected");a(b).trigger("change");h.hide();return!1});a(b).on("change.jClever",function(){if(a(this).attr("disabled"))return!1;
l.text(a(this).find(":selected").text())});a(b).on("update.jClever",function(){var e=a(this).parents(".jClever-element-select-wrapper").find(".jClever-element-select-list").empty();a(this).find("option").each(function(){e.append(a('<li data-value="'+a(this).val()+'"><span><i>'+a(this).text()+"</i></span></li>"))});a(this).parents(".jClever-element-select-wrapper").find(".jClever-element-select-center").text(a(b).find("option:eq(0)").text())});e.on("focus.jClever",function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")});
d.on("click.jClever",function(){e.trigger("focus");h.show();k[a(b).attr("name")]=h.jScrollPane().data("jsp")});var n="",q=null;e.on("keydown.jClever",function(d){var c=a(b)[0].selectedIndex;switch(d.keyCode){case 40:if(a(b).attr("disabled"))return!1;c<a(b).find("option").length-1&&c++;break;case 38:if(a(b).attr("disabled"))return!1;0<c&&c--;break;case 13:if(h.is(":visible"))h.hide();else{if(a(b).attr("disabled"))return!1;h.show();k[a(b).attr("name")]=h.jScrollPane().data("jsp")}break;case 32:if(h.is(":visible"))h.hide();
else{if(a(b).attr("disabled"))return!1;h.show();k[a(b).attr("name")]=h.jScrollPane().data("jsp")}break;case 9:return h.hide(),!0;default:n+=String.fromCharCode(d.keyCode),clearTimeout(q),q=setTimeout(function(){for(var d=0,f=a(b)[0].options.length,g=0;g<f;g++)if("string"==typeof a(b)[0].options[g].text){var j=a(b)[0].options[g].text.toUpperCase();if(RegExp("^"+n,"i").test(j)){c=d;a(b)[0].selectedIndex=c;e.find("li.selected").removeClass("selected");e.find("li:eq("+c+")").addClass("selected");e.find("option").removeAttr("selected");
e.find("option:eq("+c+")").attr("selected","selected");a(b).trigger("change");h.is(":visible")&&k[a(b).attr("name")].scrollToElement(e.find("li:eq("+c+")"));break}d++}n=""},500)}a(b)[0].selectedIndex=c;e.find("li.selected").removeClass("selected");e.find("li:eq("+c+")").addClass("selected");e.find("option").removeAttr("selected");e.find("option:eq("+c+")").attr("selected","selected");a(b).trigger("change");h.is(":visible")&&k[a(b).attr("name")].scrollToElement(e.find("li:eq("+c+")"));return!1})},
checkboxActivate:function(b,d){var c=a(b).wrap('<div class="jClever-element" tabindex="'+d+'">').addClass("hidden").after('<span class="jClever-element-checkbox-twins"><span class="jClever-element-checkbox-twins-element"></span><span class="jClever-element-checkbox-twins-color"></span></span>'),f=c.attr("id");c.parents(".jClever-element").append(g.errorTemplate);c.is(":checked")&&(c.next(".jClever-element-checkbox-twins").addClass("checked"),a("label[for="+f+"]").addClass("active"));a(b).attr("disabled")&&
c.parents(".jClever-element").addClass("disabled");c.on("change.jClever",function(){if(a(this).attr("disabled"))return!1;a(this).is(":checked")?(c.next(".jClever-element-checkbox-twins").addClass("checked"),a("label[for="+f+"]").addClass("active")):(c.next(".jClever-element-checkbox-twins").removeClass("checked"),a("label[for="+f+"]").removeClass("active"))});c.next(".jClever-element-checkbox-twins").on("click",function(){var b=a(this);b.prev("input[type=checkbox]").is(":checked")?b.prev("input[type=checkbox]").removeAttr("checked"):
b.prev("input[type=checkbox]").attr("checked","checked");b.prev("input[type=checkbox]").trigger("change")});c.parent(".jClever-element").on("keydown.jClever",function(b){var c=a(this).find("input[type=checkbox]");switch(b.keyCode){case 32:c.is(":checked")?c.removeAttr("checked"):c.attr("checked","checked");c.trigger("change");break;default:return}return!1});c.parent(".jClever-element").focus(function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")})},radioActivate:function(b,
d){var c=a(b).wrap('<div class="jClever-element" tabindex="'+d+'">').addClass("hidden").after('<span class="jClever-element-radio-twins"><span class="jClever-element-radio-twins-element"></span><span class="jClever-element-radio-twins-color"></span></span>'),f=c.attr("id");c.parents(".jClever-element").append(g.errorTemplate);c.is(":checked")&&(c.next(".jClever-element-radio-twins").addClass("checked"),a("label[for="+f+"]").addClass("active"));a(b).attr("disabled")?c.parents(".jClever-element").addClass("disabled"):
(c.on("change.jClever",function(){if(a(this).attr("disabled"))return!1;var c=a(this);c.is(":checked")?(c.next(".jClever-element-radio-twins").addClass("checked"),a("label[for="+f+"]").addClass("active")):(c.next(".jClever-element-radio-twins").removeClass("checked"),a("label[for="+f+"]").removeClass("active"));a('input:radio[name="'+a(b).attr("name")+'"]').not(a(b)).each(function(){a(this).attr("checked",!1).next(".jClever-element-radio-twins").removeClass("checked");a("label[for="+a(this).attr("id")+
"]").removeClass("active")})}),c.next(".jClever-element-radio-twins").on("click",function(){var b=a(this);b.prev("input[type=radio]").is(":checked")?b.prev("input[type=radio]").attr("checked"):b.prev("input[type=radio]").attr("checked","checked");b.prev("input[type=radio]").trigger("change")}),c.parent(".jClever-element").on("keydown.jClever",function(b){var c=a(this).find("input[type=radio]");switch(b.keyCode){case 32:c.is(":checked")?c.removeAttr("checked"):c.attr("checked","checked");c.trigger("change");
break;default:return}return!1}),c.parent(".jClever-element").focus(function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")}))},submitActivate:function(b){var d=a(b).attr("value");a(b).replaceWith('<button type="'+b.type+'" name="'+b.name+'" id="'+b.id+'"  class="styled '+b.className+'" value="'+d+'"><span><span><span>'+d+"</span></span></span>")},fileActivate:function(b,d){a(b).wrap('<div class="jClever-element" tabindex="'+d+'"><div class="jClever-element-file">').addClass("hidden-file").after('<span class="jClever-element-file-name"><span><span></span></span></span><span class="jClever-element-file-button"><span><span>'+
g.fileUploadText+"</span></span></span>").wrap('<div class="input-file-helper">');a(b).parents(".jClever-element").append(g.errorTemplate);var c=a(b).parents(".jClever-element").find(".jClever-element-file-name>span>span");a(b).on("change.jClever",function(){var b=a(this).val(),b=b.split("\\"),b=b[b.length-1];c.text(b)});a(b).parents(".jClever-element").on("keydown.jClever",function(c){switch(c.keyCode){case 32:a(b).trigger("click");break;default:return}return!1});a(b).parents(".jClever-element").focus(function(){a(this).addClass("focused")}).blur(function(){a(this).removeClass("focused")})},
inputActivate:function(b,d){a(b).wrap('<div class="jClever-element" tabindex="'+d+'"><div class="jClever-element-input"><div class="jClever-element-input"><div class="jClever-element-input">');a(b).parents(".jClever-element").append(g.errorTemplate);a(b).on("focusin.jClever",function(){a(this).parents(".jClever-element").addClass("focused")});a(b).on("focusout.jClever",function(){a(this).parents(".jClever-element").removeClass("focused")})},textareaActivate:function(b,d){a(b).wrap('<div class="jClever-element" tabindex="'+
d+'"><div class="jClever-element-textarea"><div class="jClever-element-textarea"><div class="jClever-element-textarea">');a(b).parents(".jClever-element").append(g.errorTemplate);a(b).on("focusin.jClever",function(){a(this).parents(".jClever-element").addClass("focused")});a(b).on("focusout.jClever",function(){a(this).parents(".jClever-element").removeClass("focused")})},elementAdd:function(b,d,c){switch(d){case "select":f.selectActivate(b,n,j);b=a.extend(p,c.selectCollection);c.selectCollection=
b;break;case "checkbox":"string"!=typeof b?b.each(function(){f.checkboxActivate(a(this),j)}):f.checkboxActivate(b,j);break;case "radio":f.radioActivate(b,j)}return c},elementDisable:function(b){"string"==typeof b&&(b=a(b));b.attr("disabled","disabled").closest(".jClever-element").addClass("disabled")},elementEnable:function(b){"string"==typeof b&&(b=a(b));b.removeAttr("disabled").closest(".jClever-element").removeClass("disabled")}},s={};return this.each(function(){if(!a(this).hasClass("clevered"))return a(this).addClass("clevered").addClass(g.selfClass),
f.init(this),s={selectCollection:p,destroy:function(a){f.destroy(a)},reset:function(a){f.reset(a)},selectSetPosition:function(b,d){a(b).length&&f.selectSetPosition(a(b),d)},selectAdd:function(a){f.selectAdd(a)},checkboxSetState:function(b,d){if(a(b).length)f.checkboxSetState(a(b),d);else return!1},radioSetState:function(b,d){if(a(b).length)f.radioSetState(a(b),d);else return!1},elementAdd:function(a,d,c){return f.elementAdd(a,d,c)},elementDisable:function(a){return f.elementDisable(a)},elementEnable:function(a){return f.elementEnable(a)}},
p={},a.data(a(this).get(0),"publicApi",s),!0})};a.fn.jCleverAPI=function(g){if(1<this.length)return!1;for(var p=a.data(a(this).get(0),"publicApi"),k=[],l=1;l<arguments.length;l++)k[l-1]=arguments[l];return"function"==typeof p[g]?(1==arguments.length?k=Array(a(this)):k[arguments.length-1]=p,k=p[g].apply(arguments.callee,k),"object"==typeof k?a.data(a(this).get(0),"publicApi",k):k=p,k):p[g]};jQuery.jClever=!0;a(document).mousedown(function(g){0===a(g.target).parents(".jClever-element-select-wrapper").length&&
a(".jClever-element-select-list-wrapper:visible").hide()})})(jQuery);